<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Clon TikTok</title>
    <link rel="icon" type="image/png" href="img/tk.PNG">
    <link rel="stylesheet" href="./styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Color de barra de navegaci√≥n en dispositivos Android (Chrome, Edge, etc.) -->
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Android -->
    <meta name="theme-color" content="#00000000">

    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-color: #000000bf;
            /* fondo oscuro para TikTok */
        }

        body::before {
            content: '';
            display: block;
            height: env(safe-area-inset-top);
            /* iPhone notch */
        }

        #video-feed {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        .video-item {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            position: relative;
        }


        .video-item video {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }

        /* Opcional: Ocultar scroll para que se vea m√°s limpio */
        #video-feed::-webkit-scrollbar {
            display: none;
        }

        .sidebar {
            position: absolute;
            /* o fixed si quieres que quede fija */
            right: 10px;
            bottom: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            z-index: 999;
        }

        /* Estilo de la imagen de perfil */
        .sidebar img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        /* Botones de acci√≥n */
        .sidebar button {
            background: none;
            border: none;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }



        .boton-corazon i {
            color: red;
        }


        .sidebar i {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .contador {
            font-size: 14px;
            color: white;
        }


        .video-info {
            position: absolute;
            bottom: 50px;
            left: 15px;
        }




        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: black;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;


        }


        .topbar {
            position: fixed;
            top: 0;
            /* lo pone en la parte m√°s alta */
            left: 0;
            width: 100%;
            height: 0px;
            /* ‚ö†Ô∏è Esto da altura visible al header */
            background-color: rgba(0, 0, 0, 0);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
            z-index: 10000;
            color: white;
            font-family: sans-serif;
        }


        .nav-textos a {

            margin-right: 10px;
            cursor: pointer;
            font-size: 18px;
            opacity: 1;
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }




        .icono-busqueda {
            font-size: 18px;
            cursor: pointer;
        }

        #topbar {
            display: none;
            /* Oculto al inicio */
        }


        a.btn-icono {
            text-decoration: none;
            /* ‚úÖ Elimina el subrayado */
            color: white;
            /* Asegura que el color del texto sea blanco */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }


        .icono-busqueda {
            font-size: 26px;
            /* tama√±o del √≠cono */
            color: white;
            /* o el color que desees */
            cursor: pointer;
            margin: 10px;
        }
    </style>
</head>

<body>


    <header class="topbar" id="topbar">
        <div class="nav-textos">
            <a href="profile.html" class="activo" aria-label="Perfil">
                <i class="bi bi-camera-reels"></i>
            </a>
            <a href="discover.html">Explorar</a>
            <a href="#">Siguiendo</a>
            <a href="#">Para ti</a>
        </div>
        <div class="icono-busqueda">
            <i class="bi bi-search"></i>
        </div>
    </header>

    <!-- Pantalla de carga tipo TikTok -->
    <div id="splash-screen">
        <img src="img/logo-TKTK.png" alt="Logo TikTok" class="logo">
    </div>

    <div class="video-container">

        <div id="video-feed"></div>

        <div class="sidebar">
            <div class="foto-perfil">
                <img src="./img/carlos.png" alt="Foto de perfil">
            </div>
            <button class="boton-corazon">
                <i class="bi bi-heart-fill"></i>
                <span class="contador">120.0mil</span>
            </button>
            <button>
                <i class="bi bi-chat-dots-fill"></i>
                <span class="contador">1,900</span>
            </button>
            <button>
                <i class="bi bi-bookmark-fill"></i>
                <span class="contador">8mil</span>
            </button>
            <button>
                <i class="bi bi-arrow-90deg-right"></i>
                <span class="contador">10mil</span>
            </button>
        </div>





        <div class="video-info">
            <strong>Carlos</strong>
            <p>Aventuras #travel‚úàÔ∏èüòéüõ∏...m√°s</p>
            <p>üéµMusic: Dj 13</p>
        </div>
    </div>

    <footer>
        <a href="index.html" class="btn-icono">
            <img src="img/home.svg" alt="Home" class="icono">
            <p>Inicio</p>
        </a>

        <a href="discover.html" class="btn-icono">
            <img src="img/discover.svg" alt="Discover" class="icono">
            <p>Discover</p>
        </a>

        <!-- El bot√≥n de c√°mara mantiene funcionalidad especial, no se cambia -->
        <button id="btnCamara">
            <img class="tiktok" src="img/boton-camara-TK.png" alt="Upload">
        </button>
        <input type="file" accept="image/*" capture="environment" id="inputCamara" class="oculto"
            aria-label="Abrir c√°mara">

        <a href="inbox.html" class="btn-icono">
            <img src="img/inbox.svg" alt="Inbox" class="icono">
            <p>Mensajes</p>
        </a>

        <a href="profile.html" class="btn-icono">
            <img src="img/profile.svg" alt="Profile" class="icono">
            <p>Perfil</p>
        </a>
    </footer>



    <script>
        // Pantalla de carga
        window.addEventListener("load", () => {
            setTimeout(() => {
                const splash = document.getElementById("splash-screen");
                const topbar = document.getElementById("topbar");

                splash.style.opacity = 0;
                splash.style.transition = "opacity 0.5s ease-out";

                setTimeout(() => {
                    splash.style.display = "none";
                    topbar.style.display = "flex"; // Mostrar barra superior
                }, 500);
            }, 2000); // 2 segundos
        });


        // Cargar videos desde la API de Pexels

        const container = document.getElementById('video-feed');

        const API_KEY = 'mfBKfkodYK7uJ6S6bmoNa7a5S257MmkIgHGdcOwKN7dH4RUFDvbhpR1Y'; // Coloca aqu√≠ tu API Key

        // Puedes agregar m√°s temas aqu√≠:
        const CATEGOR√çAS = ['nature', 'city', 'dance', 'music', 'sports', 'animals', 'travel', 'food', 'art', 'technology', 'cars'];

        const cargarVideos = (query) => {
            const API_URL = `https://api.pexels.com/videos/search?query=${query}&per_page=4`;

            fetch(API_URL, {
                headers: {
                    Authorization: API_KEY
                }
            })
                .then(response => response.json())
                .then(data => {
                    data.videos.forEach(video => {
                        const videoUrl = video.video_files.find(v => v.quality === "sd")?.link;
                        if (!videoUrl) return;

                        const videoWrapper = document.createElement('div');
                        videoWrapper.classList.add('video-item');

                        const videoElement = document.createElement('video');
                        videoElement.src = videoUrl;
                        videoElement.autoplay = false;
                        videoElement.loop = true;
                        videoElement.muted = true;
                        videoElement.playsInline = true;

                        videoWrapper.appendChild(videoElement);
                        container.appendChild(videoWrapper);
                    });

                    // Despu√©s de cargar todos, observar los videos
                    const videos = document.querySelectorAll('video');
                    if (videos.length > 0) {
                        videos[0].play();
                    }

                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.play();
                            } else {
                                entry.target.pause();
                            }
                        });
                    }, { threshold: 0.7 });

                    videos.forEach(video => observer.observe(video));
                });
        };

        // Cargar videos de todas las categor√≠as
        CATEGOR√çAS.forEach(cargarVideos);



    </script>
</body>

</html>