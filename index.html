<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clon TikTok</title>
    <link rel="icon" type="image/png" href="img/tk.PNG">
    <link rel="stylesheet" href="./styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Color de barra de navegaci√≥n en dispositivos Android (Chrome, Edge, etc.) -->
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <meta name="theme-color" content="#000000">

    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            background: black;
            color: white;
            overflow: auto;
        }



        #video-feed {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        .video-item {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            position: relative;
        }


        .video-item video {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }


        /* Opcional: Ocultar scroll para que se vea m√°s limpio */
        #video-feed::-webkit-scrollbar {
            display: none;
        }

        .sidebar {
            position: absolute;
            /* o fixed si quieres que quede fija */
            right: 10px;
            bottom: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 9px;
            z-index: 999;
        }

        /* Estilo de la imagen de perfil */
        .sidebar img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        /* Botones de acci√≥n */
        .sidebar button {
            background: none;
            border: none;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;

        }



        .boton-corazon i {
            color: rgb(255, 255, 255);
        }


        .sidebar i {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .contador {
            font-size: 14px;
            color: white;
        }


        .video-info {
            position: absolute;
            bottom: 50px;
            left: 15px;
        }




        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: black;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;


        }


        .topbar {
            position: fixed;
            top: 0;
            /* lo pone en la parte m√°s alta */
            left: 0;
            width: 100%;
            height: 0px;
            /* ‚ö†Ô∏è Esto da altura visible al header */
            background-color: rgba(0, 0, 0, 0);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 14px;
            z-index: 10000;
            color: white;
            font-family: sans-serif;
        }


        .nav-textos a {

            margin-right: 10px;
            cursor: pointer;
            font-size: 18px;
            opacity: 1;
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }

        .nav-textos a:hover {
            opacity: 0.3;
            /* Cambia la opacidad al pasar el rat√≥n */
        }



        .icono-busqueda {

            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;

        }

        #topbar {
            display: none;
            /* Oculto al inicio */
        }



        .icono-svg {
            width: 2rem;
            /* Tama√±o similar a Bootstrap Icons */
            height: 2rem;
            fill: currentColor;
            /* Usa el color del texto del padre */
            vertical-align: middle;
            filter: invert();
        }

        a.btn-icono {
            text-decoration: none;
            /* ‚úÖ Elimina el subrayado */
            color: white;
            /* Asegura que el color del texto sea blanco */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }





        .foto-perfil {
            position: relative;
            display: inline-block;
        }

        .foto-perfil img {
            width: 50px;
            /* puedes ajustar seg√∫n el tama√±o */
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .burbuja-perfil {
            position: absolute;
            bottom: -6px;
            /* queda justo debajo de la imagen */
            left: 50%;
            transform: translateX(-50%);
            background-color: rgb(255, 0, 60);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 6px red;
        }

        /* barra de navegaci√≥n secundaria*/
        .para-ti-link {
            border-bottom: 2px solid rgb(255, 255, 255);
            padding-bottom: 4px;
        }


        .nav-textos {
            display: flex;
            align-items: center;
            gap: 5px;
            /* Espacio entre los enlaces */
        }

        .opaco {
            opacity: 0.5 !important;


        }

        .burbuja-container {
            position: relative;
        }

        .badge-alert {
            position: absolute;
            top: -5px;
            right: -10px;
            background-color: red;
            color: rgb(255, 0, 0);
            font-size: 5px;
            padding: 2px 5px;
            border-radius: 50%;
        }



        /* Estilo ventana emergente de comentarios */

        .popup-comentarios {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-height: 50%;
            background: #080808;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.11);
            z-index: 999;
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }




        .popup-comentarios.mostrar {
            transform: translateY(0%);
            opacity: 1;
            animation: slideUpFadeIn 0.3s ease forwards;
        }

        /* Animaci√≥n de entrada */

        @keyframes slideUpFadeIn {
            from {
                transform: translateY(100%);
                opacity: 0;
            }

            to {
                transform: translateY(0%);
                opacity: 1;
            }
        }


        .comentarios-header {
            flex-shrink: 0;
            position: sticky;
            top: 0;
            background-color: #080808;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #080808;
            padding: 10px 15px;
            border-radius: 15px;
        }

        .titulo-comentarios {
            margin: 0 auto;
            font-size: 16px;
            font-weight: bold;
        }

        .comentarios-contenido {
            overflow-y: auto;
            padding: 10px 15px;
            flex-grow: 1;

            /* Firefox */
            scrollbar-width: none;

            /* Internet Explorer 10+ */
            -ms-overflow-style: none;
        }

        /* Chrome, Safari, Edge, Opera */
        .comentarios-contenido::-webkit-scrollbar {
            display: none;
        }


        .comentario {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #22222200;
            font-size: 12px;
            color: white;
            position: relative;

            max-width: 1000px;
            /* Limita el ancho del comentario */
            margin: 0 auto;
            /* Centra horizontalmente */
            width: 100%;
            /* Asegura que use todo el ancho disponible dentro del l√≠mite */
        }

        .avatar {
            width: 32px !important;
            height: 32px !important;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .contenido-comentario {
            display: block;
            flex-direction: column;
            /* üëà Clave para que el texto y los botones se apilen verticalmente */
            max-width: 100%;
        }


        .contenido-comentario p {
            margin: 0;
            font-size: 12px;
            color: #fff;
            text-align: justify;
            /* Justifica el texto */
            line-height: 1.4;
            /* Espaciado vertical c√≥modo */
            word-break: break-word;
            /* Evita que el texto se desborde */
        }

        .like-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1px;
            color: #414141;
            transition: color 0.2s ease;
            align-self: flex-end;
            /* üëà Esto lo baja al fondo del contenedor */
        }

        /* Estilo para el bot√≥n de "me gusta" */
        .reacciones {
            display: flex;
            justify-content: flex-start;
            /* üëâ los alinea a la izquierda */
            gap: 10px;
            margin-top: 5px;
        }


        .like-btn i,
        .dislike-btn i {
            font-size: 10px;
            transition: color 0.3s;
            cursor: pointer;
        }

        .like-btn.liked i {
            color: red;
        }

        .dislike-btn.disliked i {
            color: gray;
        }


        /* Cambia el color del icono al hacer clic */

        @keyframes pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.4);
            }

            100% {
                transform: scale(1);
            }
        }

        .like-btn.liked i {
            color: #ff2c55;
            animation: pop 0.3s ease;
        }





        /* Estilo para el bot√≥n de cerrar */

        .oculto {
            display: none;
        }

        .cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: white;
            cursor: pointer;
        }

        button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: white;
        }
    </style>
</head>

<body>


    <header class="topbar" id="topbar">
        <div class="nav-textos">
            <a href="#" class="activo" aria-label="Perfil">
                <img src="img/tiktok-live-black.svg" alt="Perfil" class="icono-svg">
            </a>

            <a href="#" class="opaco">Explorar</a>

            <a href="#" class="burbuja-container opaco">
                Siguiendo
                <span class="badge-alert">.</span>
            </a>

            <a href="#" class="para-ti-link">Para ti</a>
        </div>

        <div class="icono-busqueda">
            <i class="bi bi-search"></i>
        </div>
    </header>


    <!-- Pantalla de carga tipo TikTok -->
    <div id="splash-screen">
        <img src="img/logo-TKTK.png" alt="Logo TikTok" class="logo">
    </div>

    <div class="video-container">
        <div id="video-feed"></div>
        <div class="sidebar">
            <div class="foto-perfil">
                <img src="./img/carlos.png" alt="Foto de perfil">
                <span class="burbuja-perfil">+</span>
            </div>

            <button class="boton-corazon">
                <i class="bi bi-heart-fill"></i>
                <span class="contador">120mil</span>
            </button>
            <!-- Bot√≥n de comentarios -->
            <button id="btnComentarios" onclick="toggleComentarios()">
                <i class="bi bi-chat-dots-fill"></i>
                <span class="contador">520</span>
            </button>

            <div id="ventanaComentarios" class="popup-comentarios oculto">
                <div class="comentarios-header">
                    <h4 class="titulo-comentarios">520 comentarios</h4>
                    <button class="cerrar" onclick="toggleComentarios()">‚úï</button>
                </div>
                <div class="comentarios-contenido">
                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=20" alt="ana" />
                        <div class="contenido-comentario">
                            <p><strong>@user:</strong> sigue asi poco a poco terminaras por completo el clone tiktok!
                                üßëüèΩ‚Äçüíªüõ∏üôèüèΩ</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=2" alt="pablo" />
                        <div class="contenido-comentario">
                            <p><strong>@pablo:</strong> ¬°Buen trabajo, pero podr√≠as mejorar en algunos detalles! üòÖ</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=20" alt="maria" />
                        <div class="contenido-comentario">
                            <p><strong>@maria:</strong> ¬°Incre√≠ble! Lorem ipsum dolor sit amet consectetur adipisicing
                                elit. Ipsa dolore autem fugit eveniem ipsa consequuntur voluptate aliquam delectus
                                obcaecanetur dolor, reiciendis, magni error?üëè</p>
                            <div class="reacciones">
                                <button class="like-btn liked"><i class="bi bi-heart-fill"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=4" alt="jose" />
                        <div class="contenido-comentario">
                            <p><strong>@lisbeth:</strong>¬°Me encanta! Lorem ipsum dolor, sit amet consectetur
                                adipisicing elit. Ex, officiis aliquid nulla iste saepe ipsa quisquam repudiandae
                                possimus.</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=5" alt="laura" />
                        <div class="contenido-comentario">
                            <p><strong>@laura:</strong> ¬°Genial! Lorem ipsum dolor sit amet consectetur adipisicing
                                elit. Alias, dignissimos fugit, ab ad qui officiis cumque eum aut! Minus velit dolorem
                                laboriosam explicabo aspernatur.</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=10" alt="laura" />
                        <div class="contenido-comentario">
                            <p><strong>@sol:</strong> ¬°Genial! üôèüèΩüî• Lorem ipsum dolor sit amet consectetur adipisicing
                                elit. Alias, dignissimos fugit, ab ad quibusdam quis, incidunt numquam placeat
                                voluptatem minima officiis cumque eum aut! Minus velit dolorem laboriosam explicabo
                                aspernatur.</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=50" alt="laura" />
                        <div class="contenido-comentario">
                            <p><strong>@ana:</strong> ¬°Genial! Lorem ipsum dolor sit amet consectetur adipisicing elit.
                                Alias, d.</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="comentario">
                        <img class="avatar" src="https://i.pravatar.cc/40?img=30" alt="laura" />
                        <div class="contenido-comentario">
                            <p><strong>@lis:</strong> ¬°Genial! Lorem ipsum dolor sit amet consectetur adipisicing elit.
                                Alias, d.</p>
                            <div class="reacciones">
                                <button class="like-btn"><i class="bi bi-heart"></i></button>
                                <button class="dislike-btn"><i class="bi bi-hand-thumbs-down"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button>
                <i class="bi bi-bookmark-fill"></i>
                <span class="contador">8mil</span>
            </button>
            <button>
                <i class="bi bi-arrow-90deg-right"></i>
                <span class="contador">500</span>
            </button>
        </div>



        <div class="video-info">
            <strong>CarlosJos√©</strong>
            <p>#travel‚úàÔ∏è üõ∏#Clon/tiktoküî• üßëüèΩ‚Äçüíª...m√°s</p>
            <p>üéµMusic: Dj 13</p>
        </div>


    </div>

    <footer>
        <a href="index.html" class="btn-icono">
            <img src="img/home.svg" alt="Home" class="icono">
            <p>Inicio</p>
        </a>

        <a href="discover.html" class="btn-icono">
            <img src="img/discover.svg" alt="Discover" class="icono">
            <p>Discover</p>
        </a>

        <!-- El bot√≥n de c√°mara mantiene funcionalidad especial, no se cambia -->
        <button id="btnCamara">
            <img class="tiktok" src="img/boton-camara-TK.png" alt="Upload">
        </button>
        <input type="file" accept="image/*" capture="environment" id="inputCamara" class="oculto"
            aria-label="Abrir c√°mara">

        <a href="#" class="btn-icono notificacion">
            <img src="img/inbox.svg" alt="Inbox" class="icono">
            <span class="burbuja">10</span>
            <p>Mensajes</p>
        </a>

        <a href="profile.html" class="btn-icono">
            <img src="img/profile.svg" alt="Profile" class="icono">
            <p>Perfil</p>
        </a>
    </footer>


    <script>
        // Pantalla de carga
        window.addEventListener("load", () => {
            setTimeout(() => {
                const splash = document.getElementById("splash-screen");
                const topbar = document.getElementById("topbar");

                splash.style.opacity = 0;
                splash.style.transition = "opacity 0.5s ease-out";

                setTimeout(() => {
                    splash.style.display = "none";
                    topbar.style.display = "flex"; // Mostrar barra superior
                }, 500);
            }, 2000); // 2 segundos
        });


        // Cargar videos desde la API de Pexels

        const container = document.getElementById('video-feed');

        const API_KEY = 'mfBKfkodYK7uJ6S6bmoNa7a5S257MmkIgHGdcOwKN7dH4RUFDvbhpR1Y'; // Coloca aqu√≠ tu API Key

        // Puedes agregar m√°s temas aqu√≠:
        const CATEGOR√çAS = ['Space', 'city', 'dance', 'News', 'sports', 'animals', 'travel', 'food', 'Education', 'technology', 'cars'];

        const cargarVideos = (query) => {
            const API_URL = `https://api.pexels.com/videos/search?query=${query}&per_page=4`;

            fetch(API_URL, {
                headers: {
                    Authorization: API_KEY
                }
            })
                .then(response => response.json())
                .then(data => {
                    data.videos.forEach(video => {
                        const videoUrl = video.video_files.find(v => v.quality === "sd")?.link;
                        if (!videoUrl) return;

                        const videoWrapper = document.createElement('div');
                        videoWrapper.classList.add('video-item');

                        const videoElement = document.createElement('video');
                        videoElement.src = videoUrl;
                        videoElement.autoplay = false;
                        videoElement.loop = true;
                        videoElement.muted = true;
                        videoElement.playsInline = true;

                        videoWrapper.appendChild(videoElement);
                        container.appendChild(videoWrapper);
                    });

                    // Despu√©s de cargar todos, observar los videos
                    const videos = document.querySelectorAll('video');
                    if (videos.length > 0) {
                        videos[0].play();
                    }

                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.play();
                            } else {
                                entry.target.pause();
                            }
                        });
                    }, { threshold: 0.7 });

                    videos.forEach(video => observer.observe(video));
                });
        };

        // Cargar videos de todas las categor√≠as
        CATEGOR√çAS.forEach(cargarVideos);



        // Mostrar/ocultar ventana de comentarios
        function toggleComentarios() {
            const ventana = document.getElementById('ventanaComentarios');

            if (ventana.classList.contains('mostrar')) {
                // Oculta con animaci√≥n inversa
                ventana.classList.remove('mostrar');
                setTimeout(() => ventana.classList.add('oculto'), 300); // Espera a que termine la animaci√≥n
            } else {
                ventana.classList.remove('oculto');
                // Activa animaci√≥n de entrada
                setTimeout(() => ventana.classList.add('mostrar'), 10);
            }
        }


        // Cerrar al hacer clic fuera
        document.addEventListener('click', function (e) {
            const ventana = document.getElementById('ventanaComentarios');
            const boton = document.getElementById('btnComentarios');

            if (!ventana.contains(e.target) && !boton.contains(e.target)) {
                ventana.classList.remove('mostrar');
                setTimeout(() => ventana.classList.add('oculto'), 300); // Espera que se oculte suavemente
            }
        });


        // Agregar evento de clic a los botones de "me gusta"
        // Like
        document.querySelectorAll('.like-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const icon = btn.querySelector('i');
                btn.classList.toggle('liked');
                icon.classList.toggle('bi-heart');
                icon.classList.toggle('bi-heart-fill');
            });
        });

        // Dislike
        document.querySelectorAll('.dislike-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const icon = btn.querySelector('i');
                btn.classList.toggle('disliked');
                icon.classList.toggle('bi-hand-thumbs-down');
                icon.classList.toggle('bi-hand-thumbs-down-fill');
            });
        });

    </script>
</body>

</html>